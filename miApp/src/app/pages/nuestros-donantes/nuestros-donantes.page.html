<ion-app>
  <ion-header>

  </ion-header>
  <ion-content>
    <div class="ion-padding">
      <h2 class="ion-text-center ion-margin-bottom">¡Encuentra a nuestros donantes!</h2>

      <!-- Cards generadas dinámicamente -->
      <ion-grid>
        <ion-row>
          <ion-col size="12" size-md="6" size-lg="4" *ngFor="let empresa of empresas">
            <ion-card class="empresa-card">
              <ion-card-header>
                <ion-card-title>{{ empresa.nombre }}</ion-card-title>
              </ion-card-header>
              <ion-card-content>
                <p><ion-icon name="call-outline"></ion-icon> Tel: {{ empresa.telefono }}</p>
                <p><ion-icon name="location-outline"></ion-icon> Ubicación: {{ empresa.direccion }}, {{ empresa.ciudad }}
                </p>
                <p class="card-text">
                  <ion-icon name="cash-outline"></ion-icon>
                  Total Donaciones: €{{ TotalDonaciones(empresa) | number:'1.2-2' }}
                </p>
                
                <ion-button expand="block" (click)="obtenerYMostrarUbicacion(empresa)">
                  Ver en el mapa
                </ion-button>
              </ion-card-content>
            </ion-card>
          </ion-col>
        </ion-row>
      </ion-grid>
       
     <!-- Controles de paginación -->
<div class="pagination-container">
  <ion-button
    fill="clear"
    [disabled]="paginaActual === 0"
    (click)="cambiarPagina(paginaActual - 1)"
  >
    <ion-icon name="chevron-back-outline"></ion-icon>
  </ion-button>

  <!-- Número de página -->
  <div class="page-label">
    Página {{ paginaActual + 1 }} / {{ totalPaginas }}
  </div>

  <ion-button
    fill="clear"
    [disabled]="paginaActual === totalPaginas - 1"
    (click)="cambiarPagina(paginaActual + 1)"
  >
    <ion-icon name="chevron-forward-outline"></ion-icon>
  </ion-button>
</div>


      <!-- Contenedor del mapa -->
      <div #mapSection class="ion-margin-vertical map-container">
        <div id="mapa"></div>
      </div>
    </div>
  </ion-content>
  <ion-footer>
    <app-navbar></app-navbar>
  </ion-footer>
</ion-app>